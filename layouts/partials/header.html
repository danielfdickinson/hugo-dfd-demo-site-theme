{{- $curPage := . -}}
{{- if ne (.Param "showTopBarMenu") false }}
<header class="header-demo-site">
    <nav aria-label="Main Site Menu"
    class="bar-demo-site menubar-demo-site demo-mainmenu">
        <ul class="list-demo-site"><li class="list-item-demo-site{{- if eq $curPage site.Home }} current-menu-is-demo-site{{- end -}}">
                <span class="link-wrapper-demo-site"><a
                class="link-demo-site" href="{{- site.Home.RelPermalink -}}">{{-
                partial "return-helpers/title" site.Home -}}</a></span>
            </li>
        {{- $mainMenu := site.Menus.main -}}
        {{- $sections := where site.Home.Pages "Section" "in" site.Params.mainSections -}}
        {{- $menuPages := (slice) -}}
        {{- range $mainMenu -}}
            {{- $menuPages = $menuPages | append (where site.Home.Pages "RelPermalink" .URL) -}}
        {{- end -}}
        {{- range (union $sections $menuPages).ByWeight.ByDate -}}
            <li class="list-item-demo-site{{- if eq $curPage . }} current-menu-is-demo-site{{- end -}}">
                <span class="link-wrapper-demo-site"><a
                href="{{- .RelPermalink -}}" class="link-demo-site">{{-
                partial "return-helpers/title" . -}}</a></span>
            </li>
        {{- end -}}
        </ul>
    </nav>
{{- end }}
</header>
